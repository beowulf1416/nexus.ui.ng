<div class="component component-tenant-selector">
    <div class="form-wrapper">
        <form id="form_tenant_selector" class="form-tenant-selector" method="post" action="" [formGroup]="component.formTenants">
            <mat-card>
                <mat-card-header>
                    <mat-card-title>Tenant Selector</mat-card-title>
                    <mat-card-subtitle>Select a tenant</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content>
                    <div class="filter">
                        <mat-form-field appearance="outline">
                            <input type="search" id="filter" name="filter" placeholder="Search" matInput formControlName="filter" />
                            <button type="button" id="btn_search" name="btn_search" title="Search" (click)="search()" mat-icon-button matSuffix>
                                <mat-icon>search</mat-icon>
                            </button>
                        </mat-form-field>
                    </div><!-- .filter -->
                    <div class="matches">
                        <table>
                            <caption>Matches</caption>
                            <thead>
                                <tr>
                                    <td>
                                        @if (multiple()) {
                                            <input type="checkbox" />
                                        }
                                    </td>
                                    <td>Name</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tfoot>
                                <tr>
                                    <td></td>
                                    <td>Name</td>
                                    <td>Description</td>
                                </tr>
                            </tfoot>
                            <tbody formArrayName="matches">
                                @for(t of matches.controls; track $index; let i = $index){ 
                                <tr [formGroupName]="i">
                                    <td><input type="checkbox" id="selected_{{ i }}" name="selected" title="Select" [value]="t.value.id" formControlName="selected" /></td>
                                    <td>
                                        <button type="button" class="btn btn-select" aria-label="Select" matMiniFab (click)="select_tenant(t.value)">
                                            <mat-icon>arrow_drop_down</mat-icon>
                                        </button>
                                    </td>
                                    <td>{{ t.value.name }}</td>
                                    <td>{{ t.value.description }}</td>
                                </tr>
                                }
                            </tbody>
                        </table>
                    </div><!-- .matches -->
                    <div class="selected">
                        <table>
                            <caption>Selected</caption>
                            <thead>
                                <tr>
                                    <td>
                                        @if (multiple()) {
                                            <input type="checkbox" />
                                        }
                                    </td>
                                    <td>Name</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tfoot>
                                <tr>
                                    <td></td>
                                    <td>Name</td>
                                    <td>Description</td>
                                </tr>
                            </tfoot>
                            <tbody formArrayName="selected">
                                @for(t of selected.controls; track $index; let i = $index){ 
                                <tr [formGroupName]="i">
                                    <td>
                                        <button type="button" class="btn btn-deselect" aria-label="Deselect" matMiniFab (click)="deselect_tenant(t.value, i)">
                                            <mat-icon>arrow_drop_up</mat-icon>
                                        </button>
                                    </td>
                                    <td>{{ t.value.name }}</td>
                                    <td>{{ t.value.description }}</td>
                                </tr>
                                }
                            </tbody>
                        </table>
                    </div><!-- .selected -->
                </mat-card-content>
                <mat-card-actions>
                    <button type="button" (click)="select()">
                        Select
                    </button>
                </mat-card-actions>
            </mat-card>
        </form>
    </div><!-- .form-wrapper -->
</div><!-- .component -->